<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>待合室</title>
</head>

<link rel="stylesheet" href="waitroom.css">

<body>
  <h1>待合室</h1>

  <h2>Hi<div sec:authentication="name"/></h2>

  <div sec:authorize="hasRole('ROLE_ADMIN')" th:object="${class}">
    <h3>アンケートを集計する科目を追加</h3>
      <form th:action="@{/addClass}" method="post">
        <input type="text" name="className"/>
        <input type="submit" value="追加"><input type="reset" value="リセット">
      </form>
  </div>

  <h3>収集中のアンケート</h3>
  <p>
    <ul>
      <li th:each="class : ${classlist}"><a th:href="@{/class(id=${class.classId})}"> [[${class.className}]]</a></li>
    </ul>
    </p>

  <a href="/logout">ログアウト</a>
</body>

<script>
  window.onload = function() {

// CSSのリロードを強制的に実行
const links = document.getElementsByTagName("link");
for (let i = 0; i < links.length; i++) {
  const link = links[i];
  link.href = link.href; 
}

// あるいは
// location.reload(true);

}
</script>

</html>
